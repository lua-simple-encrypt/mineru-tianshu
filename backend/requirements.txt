# MinerU-Server Backend Unified Requirements

# ============================================================================
# Core Frameworks
# ============================================================================
# vllm (Installing in Dockerfile)
paddlepaddle-gpu==3.3.0

# ============================================================================
# OCR & Pipeline Engines
# ============================================================================
mineru[core]>=2.7.6
doclayout-yolo>=0.0.2
ftfy>=6.1.0

# PaddleOCR
paddleocr>=2.8.0

# Transformers & Tokenizers
transformers==4.57.6
tokenizers>=0.22.0

# ============================================================================
# Missing MinerU Dependencies
# ============================================================================
mineru-vl-utils>=0.1.19.1,<1
qwen-vl-utils>=0.0.14,<1
pdftext>=0.6.3
pypdfium2>=4.30.0
fast-langdetect>=0.2.3,<0.3.0
json-repair>=0.46.2
magika>=0.6.2,<1.1.0
shapely>=2.0.7,<3
pyclipper>=1.3.0,<2
omegaconf>=2.3.0,<3
accelerate>=1.5.1
onnxruntime>=1.17.0

# ============================================================================
# Image Processing
# ============================================================================
PyMuPDF>=1.24.0
Pillow>=11.0.0
img2pdf>=0.5.0
pikepdf>=9.0.0

# [修复] 升级 albumentations 以匹配 doclayout-yolo 0.0.4 的要求 (>=1.4.11)
albumentations>=1.4.11
# 移除 albucore 的手动锁定，让 albumentations 自动拉取兼容版本
# albucore... 

kiwisolver>=1.4.5
matplotlib>=3.9.0
contourpy>=1.3.0

# ============================================================================
# Audio & Video
# ============================================================================
funasr>=1.2.7
ffmpeg-python>=0.2.0
soundfile>=0.12.0
opencv-python>=4.10.0
imagehash>=4.3.0
# [重要] 严格限制 numpy 版本，防止 scikit-image 升级到 2.x 导致 numba 崩溃
numpy>=1.26.0,<2.0.0

# ============================================================================
# Bioinformatics & Other Utils
# ============================================================================
biopython>=1.80
ultralytics>=8.3.0
simple-lama-inpainting>=0.1.0
huggingface-hub>=0.23.2
modelscope>=1.18.0
safetensors>=0.7.0

# ============================================================================
# Web Framework & API
# ============================================================================
fastapi==0.115.6
uvicorn[standard]==0.34.0
python-multipart>=0.0.9
litserve==0.2.16
aiohttp==3.11.11

# ============================================================================
# Auth & Utils
# ============================================================================
pyjwt>=2.9.0
authlib>=1.3.0
python3-saml>=1.16.0
pydantic[email]==2.10.5
pydantic-core==2.27.2
email-validator>=2.2.0
loguru>=0.7.0
python-dotenv>=1.0.0
markitdown[all]>=0.1.3
minio>=7.2.0
redis>=5.0.0

# ============================================================================
# MCP Protocol
# ============================================================================
mcp==1.1.2
sse-starlette==2.2.1
jsonschema>=4.20.0
jsonschema-specifications>=2023.12.1

# ============================================================================
# Build Tools
# ============================================================================
typing-extensions>=4.12.0
setuptools>=75.0.0
lxml>=5.3.0
